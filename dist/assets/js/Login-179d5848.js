import{u as y,a as s,j as e}from"./index-99957a96.js";import{r as u,u as N}from"./react-vendor-9a2eb766.js";function E(){const[r,x]=u.useState({email:"",password:""}),[m,o]=u.useState(!1),[d,n]=u.useState(""),h=N(),{showSuccess:v,showError:g}=y(),p=c=>{const{name:b,value:i}=c.target;x(l=>({...l,[b]:i})),d&&n("")};return s("div",{className:"min-h-screen flex items-center justify-center px-4 py-8 smooth-scroll mobile-smoothest-scroll no-mobile-anim",children:[e("style",{children:`
          @keyframes waveButtonAnimation {
            0%, 100% {
              background-position: 0% 50%;
            }
            50% {
              background-position: 100% 50%;
            }
          }
          
          .login-wave-button {
            background: linear-gradient(90deg, var(--theme-gold-600), var(--theme-gold-300), var(--theme-gold-600), var(--theme-gold-300));
            background-size: 300% 100%;
            animation: waveButtonAnimation 3s ease-in-out infinite;
            transition: all 0.3s ease;
          }
          
          .login-wave-button:hover {
            animation-duration: 1.5s;
          }
        `}),e("div",{className:"relative z-10",children:e("div",{className:"w-full max-w-md relative z-10",children:s("div",{className:"backdrop-blur-md bg-white/20 border border-white/30 p-8 rounded-3xl shadow-2xl",children:[s("div",{className:"text-center mb-8",children:[e("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-6",children:e("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e("h1",{className:"text-3xl sm:text-4xl font-black text-white mb-2",children:"Welcome Back"}),e("p",{className:"text-gray-100 text-lg",children:"Sign in to your MSEC Academics account"})]}),d&&e("div",{className:"mb-6",children:e("div",{className:"backdrop-blur-sm bg-red-500/20 border border-red-400/50 p-4 border-l-4 rounded-lg",children:e("p",{className:"text-red-100 text-sm font-medium",children:d})})}),s("form",{onSubmit:async c=>{var i,l,f;if(c.preventDefault(),o(!0),n(""),!r.email||!r.password){const a=r.email?"password":"email address";n(`ðŸ“ Please enter your ${a} to continue.`),o(!1);return}if(r.email.toLowerCase().split("@")[1]!=="msec.edu.in"){n("ðŸ« Only MSEC institutional emails are allowed. Use your @msec.edu.in email address."),o(!1);return}try{const t=await(await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();if(t.success)localStorage.setItem("auth",JSON.stringify({isAuthenticated:!0,email:t.user.email,name:t.user.name,role:t.user.role,department:t.user.department,id:t.user.id,year:t.user.year,section:t.user.section,loginTime:new Date().toISOString()})),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userEmail",t.user.email),localStorage.setItem("userRole",t.user.role),localStorage.setItem("userId",t.user.id),v("Welcome Back!",`Logged in as ${t.user.name}`),setTimeout(()=>{h("/"),window.dispatchEvent(new Event("authStateChanged"))},1e3);else{const w=t.error||"ðŸ” Invalid credentials. Please check your email and password, then try again.";n(w),g("Login Failed",w+" Need help? Contact support@msec.edu.in")}}catch(a){console.error("Login error:",a);let t;(i=a.message)!=null&&i.includes("fetch")||(l=a.message)!=null&&l.includes("network")?t="ðŸŒ Connection failed. Check your internet connection and try again.":(f=a.message)!=null&&f.includes("timeout")?t="â±ï¸ Request timed out. The server is slow to respond. Please try again.":t="âŒ Login failed: "+(a.message||"Unknown error. Please try again or contact support."),n(t),g("Error",t)}finally{o(!1)}},className:"space-y-6",children:[s("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Email Address"}),e("input",{type:"email",name:"email",value:r.email,onChange:p,pattern:".*@msec\\.edu\\.in$",title:"Please use your MSEC email address (@msec.edu.in)",className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Enter your MSEC email address",required:!0})]}),s("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Password"}),e("input",{type:"password",name:"password",value:r.password,onChange:p,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Enter your password",required:!0})]}),e("div",{className:"text-center",children:e("p",{className:"text-gray-100 text-sm cursor-pointer hover:text-blue-200 transition-colors",children:"Forgot password?"})}),e("div",{className:"pt-4",children:e("button",{type:"submit",disabled:m,className:"glass-button w-full py-4 px-6 text-blue-600 text-lg font-bold rounded-2xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:e("span",{className:"truncate",children:m?"Signing in...":"Sign In"})})})]}),e("div",{className:"mt-8 text-center",children:s("p",{className:"text-gray-100 text-sm",children:["Don't have an account?",e("span",{className:"text-blue-600 font-semibold cursor-pointer hover:underline ml-1",onClick:()=>h("/signup"),children:"Sign up"})]})})]})})})]})}export{E as default};
