import{a as t,j as e}from"./index-a69db077.js";import{r as c,u as x}from"./react-vendor-9a2eb766.js";const s=["MECH","CIVIL","EEE"];function k(){const[a,w]=c.useState({name:"",email:"",password:"",confirmPassword:"",role:"",department:"",year:"",section:"",phoneNumber:""}),[g,o]=c.useState(!1),[u,n]=c.useState(""),[m,p]=c.useState(""),f=x(),l=h=>{const{name:b,value:r}=h.target;w(i=>{const d={...i,[b]:r};return b==="department"&&(s.includes(r)?d.section="A":s.includes(i.department)&&!s.includes(r)&&(d.section="")),d}),u&&n(""),m&&p("")};return t("div",{className:"min-h-screen flex items-center justify-center px-4 py-8 smooth-scroll mobile-smoothest-scroll no-mobile-anim",children:[e("style",{children:`
        @keyframes waveButtonAnimation {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .login-wave-button {
          background: linear-gradient(90deg, var(--theme-gold-600), var(--theme-gold-300), var(--theme-gold-600), var(--theme-gold-300));
          background-size: 300% 100%;
          animation: waveButtonAnimation 3s ease-in-out infinite;
          transition: all 0.3s ease;
        }
        .login-wave-button:hover { animation-duration: 1.5s; }
      `}),e("div",{className:"relative z-10",children:e("div",{className:"w-full max-w-md",children:t("div",{className:"backdrop-blur-md bg-white/20 border border-white/30 p-8 rounded-3xl shadow-2xl",children:[t("div",{className:"text-center mb-8",children:[e("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-6",children:e("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e("h1",{className:"text-3xl sm:text-4xl font-black text-white mb-2",children:"Create Account"}),e("p",{className:"text-gray-100 text-lg",children:"Sign up for your MSEC Academics account"})]}),u&&e("div",{className:"mb-6",children:e("div",{className:"backdrop-blur-sm bg-red-500/20 border border-red-400/50 p-4 border-l-4 rounded-lg",children:e("p",{className:"text-red-100 text-sm font-medium",children:u})})}),m&&e("div",{className:"mb-6",children:e("div",{className:"backdrop-blur-sm bg-green-500/20 border border-green-400/50 p-4 border-l-4 rounded-lg",children:e("p",{className:"text-green-100 text-sm font-medium",children:m})})}),t("form",{onSubmit:async h=>{if(h.preventDefault(),o(!0),n(""),!a.name||!a.email||!a.password||!a.confirmPassword||!a.role||!a.department){const r=[];a.name||r.push("Full Name"),a.email||r.push("Email"),a.password||r.push("Password"),a.confirmPassword||r.push("Confirm Password"),a.role||r.push("Role"),a.department||r.push("Department"),n(`Missing required fields: ${r.join(", ")}. Please fill in all fields to continue.`),o(!1);return}if(a.email.toLowerCase().split("@")[1]!=="msec.edu.in"){n("âŒ Invalid email domain. Only MSEC institutional emails are allowed. Example: john.doe@msec.edu.in"),o(!1);return}if(a.role==="staff"&&(!a.year||!a.section)){n("ğŸ“‹ Staff members must specify: "+(a.year?"":"Academic Year (I-IV)")+(!a.year&&!a.section?" and ":"")+(a.section?"":"Section (A/B)")),o(!1);return}if(a.password!==a.confirmPassword){n("ğŸ”’ Password mismatch. The passwords you entered don't match. Please verify and try again."),o(!1);return}if(a.password.length<6){n("ğŸ”’ Password too weak. Please use at least 6 characters for security."),o(!1);return}try{const r={name:a.name,email:a.email,password:a.password,role:a.role,department:a.department,phoneNumber:a.phoneNumber};a.role==="staff"&&(r.year=a.year,r.section=a.section);const i=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),d=await i.json().catch(()=>({}));if(!i.ok){i.status===409?n("ğŸ“§ This email is already registered. Try logging in instead, or use a different email."):i.status===400?n(d.error||"âŒ Invalid information provided. Please check all fields and try again."):i.status>=500?n("ğŸ”§ Server error. Our team has been notified. Please try again in a few minutes."):n(d.error||"âŒ Failed to create account. Please check your information and try again.");return}p("Account created. Redirecting to sign in..."),setTimeout(()=>f("/login"),900)}catch(r){console.error("Sign up error:",r),r.message.includes("fetch")?n("ğŸŒ Network error. Please check your internet connection and try again."):r.message.includes("timeout")?n("â±ï¸ Request timed out. The server is taking too long to respond. Please try again."):n("âŒ Unable to create account. "+(r.message||"Please verify all information and try again."))}finally{o(!1)}},className:"space-y-6",children:[t("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Full Name"}),e("input",{name:"name",value:a.name,onChange:l,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Dr. John Doe",required:!0})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Email Address"}),e("input",{type:"email",name:"email",value:a.email,onChange:l,pattern:".*@msec\\.edu\\.in$",title:"Please use your MSEC email address (@msec.edu.in)",className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"john.doe@msec.edu.in",required:!0}),e("p",{className:"mt-2 text-xs text-gray-100",children:"Use your official MSEC email address"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Role"}),t("select",{name:"role",value:a.role,onChange:l,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white",required:!0,children:[e("option",{value:"",className:"bg-gray-800",children:"Select Role"}),e("option",{value:"staff",className:"bg-gray-800",children:"Staff"}),e("option",{value:"hod",className:"bg-gray-800",children:"HOD"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Department"}),t("select",{name:"department",value:a.department,onChange:l,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white",required:!0,children:[e("option",{value:"",className:"bg-gray-800",children:"Select Department"}),e("option",{value:"CSE",className:"bg-gray-800",children:"Computer Science & Engineering"}),e("option",{value:"AI_DS",className:"bg-gray-800",children:"Artificial Intelligence & Datascience"}),e("option",{value:"ECE",className:"bg-gray-800",children:"Electronics & Communication Engineering"}),e("option",{value:"IT",className:"bg-gray-800",children:"Information Technology"}),e("option",{value:"HNS",className:"bg-gray-800",children:"Humanities & Science (H&S)"}),e("option",{value:"MECH",className:"bg-gray-800",children:"Mechanical Engineering"}),e("option",{value:"CIVIL",className:"bg-gray-800",children:"Civil Engineering"}),e("option",{value:"EEE",className:"bg-gray-800",children:"Electrical & Electronics Engineering"})]})]}),a.role==="staff"&&t("div",{className:"grid grid-cols-2 gap-4",children:[t("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Year"}),t("select",{name:"year",value:a.year||"",onChange:l,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white",required:!0,children:[e("option",{value:"",className:"bg-gray-800",children:"Select Year"}),e("option",{value:"I",className:"bg-gray-800",children:"I"}),e("option",{value:"II",className:"bg-gray-800",children:"II"}),e("option",{value:"III",className:"bg-gray-800",children:"III"}),e("option",{value:"IV",className:"bg-gray-800",children:"IV"})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Section"}),t("select",{name:"section",value:a.section||"",onChange:l,className:`w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white ${s.includes(a.department)?"opacity-50 cursor-not-allowed":""}`,required:!0,disabled:s.includes(a.department),children:[e("option",{value:"",className:"bg-gray-800",children:"Select Section"}),e("option",{value:"A",className:"bg-gray-800",children:"A"}),!s.includes(a.department)&&e("option",{value:"B",className:"bg-gray-800",children:"B"})]}),s.includes(a.department)&&t("p",{className:"mt-1 text-xs text-gray-100",children:[a.department," has a single Section A by default."]})]})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Phone Number"}),e("input",{type:"tel",name:"phoneNumber",value:a.phoneNumber,onChange:l,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"+91-9876543210"})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Password"}),e("input",{type:"password",name:"password",value:a.password,onChange:l,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Create a password",required:!0})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-white mb-3",children:"Confirm Password"}),e("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:l,className:"w-full px-4 py-4 border-0 rounded-2xl backdrop-blur-sm bg-white/20 border border-white/30 focus:ring-2 focus:ring-blue-300 focus:outline-none transition-all duration-200 text-white placeholder:text-gray-200",placeholder:"Repeat password",required:!0})]}),e("div",{className:"pt-4",children:e("button",{type:"submit",disabled:g,className:"glass-button w-full py-4 px-6 text-blue-600 text-lg font-bold rounded-2xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:e("span",{className:"truncate",children:g?"Creating account...":"Create Account"})})})]}),e("div",{className:"mt-8 text-center",children:t("p",{className:"text-gray-100 text-sm",children:["Already have an account? ",e("span",{className:"text-blue-600 font-semibold cursor-pointer hover:underline ml-1",onClick:()=>f("/login"),children:"Sign in"})]})})]})})})]})}export{k as default};
