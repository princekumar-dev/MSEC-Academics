import{a as n,F as v,j as e}from"./index-d35fa7e7.js";import{r as d,u as y}from"./react-vendor-07fa9950.js";const o=["MECH","CIVIL","EEE"];function S(){const[a,x]=d.useState({name:"",email:"",password:"",confirmPassword:"",role:"",department:"",year:"",section:"",phoneNumber:""}),[h,i]=d.useState(!1),[u,r]=d.useState(""),[m,f]=d.useState(""),b=y(),t=p=>{const{name:g,value:l}=p.target;x(s=>{const c={...s,[g]:l};return g==="department"&&(o.includes(l)?c.section="A":o.includes(s.department)&&!o.includes(l)&&(c.section="")),c}),u&&r(""),m&&f("")};return n(v,{children:[e("style",{children:`
        @keyframes waveButtonAnimation {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .login-wave-button {
          background: linear-gradient(90deg, var(--theme-gold-600), var(--theme-gold-300), var(--theme-gold-600), var(--theme-gold-300));
          background-size: 300% 100%;
          animation: waveButtonAnimation 3s ease-in-out infinite;
          transition: all 0.3s ease;
        }
        .login-wave-button:hover { animation-duration: 1.5s; }
      `}),e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center px-4 py-8 smooth-scroll mobile-smoothest-scroll no-mobile-anim",style:{fontFamily:"Inter, sans-serif"},children:e("div",{className:"w-full max-w-md",children:n("div",{className:"glass-card no-mobile-backdrop p-8 rounded-3xl shadow-2xl",children:[n("div",{className:"text-center mb-8",children:[e("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-6",children:e("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e("h1",{className:"text-3xl sm:text-4xl font-black text-gray-900 mb-2",children:"Create Account"}),e("p",{className:"text-gray-600 text-lg",children:"Sign up for your MSEC Academics account"})]}),u&&e("div",{className:"mb-6",children:e("div",{className:"glass-card no-mobile-backdrop p-4 border-l-4 border-red-500 bg-red-50",children:e("p",{className:"text-red-700 text-sm font-medium",children:u})})}),m&&e("div",{className:"mb-6",children:e("div",{className:"glass-card no-mobile-backdrop p-4 border-l-4 border-green-500 bg-green-50",children:e("p",{className:"text-green-700 text-sm font-medium",children:m})})}),n("form",{onSubmit:async p=>{if(p.preventDefault(),i(!0),r(""),!a.name||!a.email||!a.password||!a.confirmPassword||!a.role||!a.department){r("Please fill in all required fields"),i(!1);return}if(a.email.toLowerCase().split("@")[1]!=="msec.edu.in"){r("Please use a valid MSEC email address (@msec.edu.in)"),i(!1);return}if(a.role==="staff"&&(!a.year||!a.section)){r("Please select year and section for staff role"),i(!1);return}if(a.password!==a.confirmPassword){r("Passwords do not match"),i(!1);return}try{const l={name:a.name,email:a.email,password:a.password,role:a.role,department:a.department,phoneNumber:a.phoneNumber};a.role==="staff"&&(l.year=a.year,l.section=a.section);const s=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),c=await s.json().catch(()=>({}));if(!s.ok){r(c.error||"Failed to create account");return}f("Account created. Redirecting to sign in..."),setTimeout(()=>b("/login"),900)}catch(l){console.error("Sign up error:",l),r("An error occurred while creating account. Please try again.")}finally{i(!1)}},className:"space-y-6",children:[n("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Full Name"}),e("input",{name:"name",value:a.name,onChange:t,className:"glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder:text-gray-500",placeholder:"Dr. John Doe",required:!0})]}),n("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Email Address"}),e("input",{type:"email",name:"email",value:a.email,onChange:t,pattern:".*@msec\\.edu\\.in$",title:"Please use your MSEC email address (@msec.edu.in)",className:"glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder:text-gray-500",placeholder:"john.doe@msec.edu.in",required:!0}),e("p",{className:"mt-2 text-xs text-gray-600",children:"Use your official MSEC email address"})]}),n("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Role"}),n("select",{name:"role",value:a.role,onChange:t,className:"glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900",required:!0,children:[e("option",{value:"",children:"Select Role"}),e("option",{value:"staff",children:"Staff"}),e("option",{value:"hod",children:"HOD"})]})]}),n("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Department"}),n("select",{name:"department",value:a.department,onChange:t,className:"glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900",required:!0,children:[e("option",{value:"",children:"Select Department"}),e("option",{value:"CSE",children:"Computer Science & Engineering"}),e("option",{value:"AI_DS",children:"Artificial Intelligence & Datascience"}),e("option",{value:"ECE",children:"Electronics & Communication Engineering"}),e("option",{value:"MECH",children:"Mechanical Engineering"}),e("option",{value:"CIVIL",children:"Civil Engineering"}),e("option",{value:"EEE",children:"Electrical & Electronics Engineering"})]})]}),a.role==="staff"&&n("div",{className:"grid grid-cols-2 gap-4",children:[n("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Year"}),n("select",{name:"year",value:a.year||"",onChange:t,className:"glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900",required:!0,children:[e("option",{value:"",children:"Select Year"}),e("option",{value:"I",children:"I"}),e("option",{value:"II",children:"II"}),e("option",{value:"III",children:"III"}),e("option",{value:"IV",children:"IV"})]})]}),n("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Section"}),n("select",{name:"section",value:a.section||"",onChange:t,className:`glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900 ${o.includes(a.department)?"bg-gray-100 cursor-not-allowed":""}`,required:!0,disabled:o.includes(a.department),children:[e("option",{value:"",children:"Select Section"}),e("option",{value:"A",children:"A"}),!o.includes(a.department)&&e("option",{value:"B",children:"B"})]}),o.includes(a.department)&&n("p",{className:"mt-1 text-xs text-gray-500",children:[a.department," has a single Section A by default."]})]})]}),n("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Phone Number"}),e("input",{type:"tel",name:"phoneNumber",value:a.phoneNumber,onChange:t,className:"glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder:text-gray-500",placeholder:"+91-9876543210"})]}),n("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Password"}),e("input",{type:"password",name:"password",value:a.password,onChange:t,className:"glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder:text-gray-500",placeholder:"Create a password",required:!0})]}),n("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Confirm Password"}),e("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:t,className:"glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder:text-gray-500",placeholder:"Repeat password",required:!0})]}),e("div",{className:"pt-4",children:e("button",{type:"submit",disabled:h,className:"glass-button w-full py-4 px-6 text-blue-600 text-lg font-bold rounded-2xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:e("span",{className:"truncate",children:h?"Creating account...":"Create Account"})})})]}),e("div",{className:"mt-8 text-center",children:n("p",{className:"text-gray-600 text-sm",children:["Already have an account? ",e("span",{className:"text-blue-600 font-semibold cursor-pointer hover:underline ml-1",onClick:()=>b("/login"),children:"Sign in"})]})})]})})})]})}export{S as default};
