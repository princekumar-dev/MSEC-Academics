import{u as f,a as t,F as x,j as e}from"./index-2dab8aa8.js";import{r as d,u as v}from"./react-vendor-bd533c48.js";function S(){const[r,p]=d.useState({email:"",password:""}),[c,n]=d.useState(!1),[l,s]=d.useState(""),m=v(),{showSuccess:b,showError:u}=f(),g=i=>{const{name:h,value:o}=i.target;p(a=>({...a,[h]:o})),l&&s("")};return t(x,{children:[e("style",{children:`
          @keyframes waveButtonAnimation {
            0%, 100% {
              background-position: 0% 50%;
            }
            50% {
              background-position: 100% 50%;
            }
          }
          
          .login-wave-button {
            background: linear-gradient(90deg, var(--theme-gold-600), var(--theme-gold-300), var(--theme-gold-600), var(--theme-gold-300));
            background-size: 300% 100%;
            animation: waveButtonAnimation 3s ease-in-out infinite;
            transition: all 0.3s ease;
          }
          
          .login-wave-button:hover {
            animation-duration: 1.5s;
          }
        `}),e("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center px-4 py-8 smooth-scroll mobile-smoothest-scroll no-mobile-anim",style:{fontFamily:"Inter, sans-serif"},children:e("div",{className:"w-full max-w-md",children:t("div",{className:"glass-card no-mobile-backdrop p-8 rounded-3xl shadow-2xl",children:[t("div",{className:"text-center mb-8",children:[e("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-6",children:e("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e("h1",{className:"text-3xl sm:text-4xl font-black text-gray-900 mb-2",children:"Welcome Back"}),e("p",{className:"text-gray-600 text-lg",children:"Sign in to your MSEC Academics account"})]}),l&&e("div",{className:"mb-6",children:e("div",{className:"glass-card no-mobile-backdrop p-4 border-l-4 border-red-500 bg-red-50",children:e("p",{className:"text-red-700 text-sm font-medium",children:l})})}),t("form",{onSubmit:async i=>{if(i.preventDefault(),n(!0),s(""),!r.email||!r.password){s("Please fill in all fields"),n(!1);return}if(r.email.toLowerCase().split("@")[1]!=="msec.edu.in"){s("Please use a valid MSEC email address (@msec.edu.in)"),n(!1);return}try{const a=await(await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();a.success?(localStorage.setItem("auth",JSON.stringify({isAuthenticated:!0,email:a.user.email,name:a.user.name,role:a.user.role,department:a.user.department,id:a.user.id,year:a.user.year,section:a.user.section,loginTime:new Date().toISOString()})),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userEmail",a.user.email),localStorage.setItem("userRole",a.user.role),localStorage.setItem("userId",a.user.id),b("Welcome Back!",`Logged in as ${a.user.name}`),setTimeout(()=>{m("/"),window.dispatchEvent(new Event("authStateChanged"))},1e3)):(s(a.error||"Invalid email or password"),u("Login Failed",a.error||"Invalid email or password"))}catch(o){console.error("Login error:",o);const a="An error occurred during login. Please try again.";s(a),u("Error",a)}finally{n(!1)}},className:"space-y-6",children:[t("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Email Address"}),e("input",{type:"email",name:"email",value:r.email,onChange:g,pattern:".*@msec\\.edu\\.in$",title:"Please use your MSEC email address (@msec.edu.in)",className:"glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder:text-gray-500",placeholder:"Enter your MSEC email address",required:!0})]}),t("div",{children:[e("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Password"}),e("input",{type:"password",name:"password",value:r.password,onChange:g,className:"glass-input w-full px-4 py-4 border-0 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder:text-gray-500",placeholder:"Enter your password",required:!0})]}),e("div",{className:"text-center",children:e("p",{className:"text-gray-600 text-sm cursor-pointer hover:text-blue-600 transition-colors",children:"Forgot password?"})}),e("div",{className:"pt-4",children:e("button",{type:"submit",disabled:c,className:"glass-button w-full py-4 px-6 text-blue-600 text-lg font-bold rounded-2xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:e("span",{className:"truncate",children:c?"Signing in...":"Sign In"})})})]}),e("div",{className:"mt-8 text-center",children:t("p",{className:"text-gray-600 text-sm",children:["Don't have an account?",e("span",{className:"text-blue-600 font-semibold cursor-pointer hover:underline ml-1",onClick:()=>m("/signup"),children:"Sign up"})]})})]})})})]})}export{S as default};
