import{j as s,F as k,a as P}from"./index-99957a96.js";import{r as a}from"./react-vendor-9a2eb766.js";function C({duration:o=3e3,onComplete:e}){const[n,c]=a.useState([]);return a.useEffect(()=>{const t=Array.from({length:50},(f,m)=>({id:m,left:Math.random()*100,delay:Math.random()*.5,duration:2+Math.random()*2,color:["#fbbf24","#f59e0b","#3b82f6","#10b981","#ef4444","#8b5cf6"][Math.floor(Math.random()*6)],rotation:Math.random()*360}));c(t);const u=setTimeout(()=>{e==null||e()},o);return()=>clearTimeout(u)},[o,e]),P("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:[n.map(t=>s("div",{className:"absolute w-3 h-3 confetti-piece",style:{left:`${t.left}%`,top:"-10px",backgroundColor:t.color,animationDelay:`${t.delay}s`,animationDuration:`${t.duration}s`,transform:`rotate(${t.rotation}deg)`}},t.id)),s("style",{jsx:!0,children:`
        @keyframes confetti-fall {
          0% {
            transform: translateY(0) rotate(0deg);
            opacity: 1;
          }
          100% {
            transform: translateY(100vh) rotate(720deg);
            opacity: 0;
          }
        }

        .confetti-piece {
          animation: confetti-fall linear forwards;
        }
      `})]})}function X(){const[o,e]=a.useState(!1);return{celebrate:()=>{e(!0)},ConfettiContainer:()=>s(k,{children:o&&s(C,{onComplete:()=>e(!1)})})}}function z(o,e={}){const{threshold:n=80,enabled:c=!0}=e,[t,u]=a.useState(!1),[f,m]=a.useState(!1),[g,d]=a.useState(0),[N,S]=a.useState(0),y=a.useRef(null);return a.useEffect(()=>{if(!c||!y.current)return;const l=y.current;let T=0,b=0,i=!1,h=!1;const w=r=>{!((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)<=3)||f||(T=r.touches[0].clientY,b=r.touches[0].clientX,i=!1,h=!1,S(T))},x=r=>{if(f)return;const E=r.touches[0].clientY,M=r.touches[0].clientX,v=E-T,Y=Math.abs(M-b);if((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)<=3&&v>0&&v>Y*2){i=!0,h=v>20,h&&r.cancelable&&r.preventDefault(),u(!0);const L=Math.min(v*.35,n*1.5);d(L)}else i&&(u(!1),d(0),i=!1)},p=async()=>{if(!i||f){u(!1),d(0),i=!1,h=!1;return}if(u(!1),i=!1,h=!1,g>=n){m(!0),d(n);try{await o()}catch(r){console.error("Pull-to-refresh error:",r)}finally{m(!1),d(0)}}else d(0)};return l.addEventListener("touchstart",w,{passive:!0}),l.addEventListener("touchmove",x,{passive:!1}),l.addEventListener("touchend",p,{passive:!0}),l.addEventListener("touchcancel",p,{passive:!0}),()=>{l.removeEventListener("touchstart",w),l.removeEventListener("touchmove",x),l.removeEventListener("touchend",p),l.removeEventListener("touchcancel",p)}},[c,t,f,g,n,o]),{isPulling:t,isRefreshing:f,pullDistance:g,containerRef:y,threshold:n}}function I({pullDistance:o,threshold:e,isRefreshing:n}){const c=Math.min(o/e,1),t=o/e*360;return s("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center transition-all duration-200 md:hidden",style:{height:`${o}px`,opacity:c,pointerEvents:"none"},children:s("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-3 shadow-lg",children:n?P("svg",{className:"w-6 h-6 text-theme-gold animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s("svg",{className:"w-6 h-6 text-theme-gold transition-transform duration-200",style:{transform:`rotate(${t}deg)`},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})})}export{I as P,z as a,X as u};
