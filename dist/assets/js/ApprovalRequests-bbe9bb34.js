import{u as ee,j as t,a as s,F as te}from"./index-538465e6.js";import{r as n,u as se}from"./react-vendor-07fa9950.js";import{R as re}from"./RefreshButton-e1a2b8c8.js";import{u as ne}from"./Confetti-689e3abe.js";import{H as ae}from"./ContextualHelp-840a91ca.js";function me(){const{showSuccess:o,showError:f,showWarning:_}=ee(),{celebrate:x,ConfettiContainer:M}=ne(),[c,R]=n.useState(()=>{try{const e=localStorage.getItem("auth");return e?JSON.parse(e):null}catch(e){return console.error("Failed to parse auth data:",e),null}}),[w,q]=n.useState([]),[E,k]=n.useState(!0),[N,$]=n.useState("all"),[g,I]=n.useState({open:!1,type:null,marksheet:null,anchorRect:null}),[T,L]=n.useState(!1),[B,S]=n.useState(""),[W,C]=n.useState(""),[r,j]=n.useState(!1),[Y,O]=n.useState(!1),[U,F]=n.useState(!1),[H,V]=n.useState(!1),Q=se();n.useEffect(()=>{(c==null?void 0:c.role)==="hod"?A():k(!1)},[c]);const A=async()=>{if(c){k(!0);try{console.log("[ApprovalRequests] Fetching with department:",c.department);const a=await(await fetch(`/api/marksheets?department=${c.department}&status=dispatch_requested,rescheduled_by_hod`)).json();console.log("[ApprovalRequests] Response:",a),a.success?q(a.marksheets):q([])}catch(e){console.error("Error fetching pending requests:",e),q([])}finally{k(!1)}}},G=async()=>{V(!0);try{await A()}finally{V(!1)}},i=(e,a,l)=>{var p;const h=typeof window<"u",u=(p=e==null?void 0:e.currentTarget)==null?void 0:p.getBoundingClientRect(),d=u&&h?{top:u.top+window.scrollY,left:u.left+window.scrollX,width:u.width,height:u.height}:null;S(""),I({open:!0,type:l,marksheet:a,anchorRect:d})},m=()=>{I({open:!1,type:null,marksheet:null,anchorRect:null}),S("")},v=async({comments:e,scheduledDispatchDate:a})=>{var l,h;if(!(!g.marksheet||!g.type))try{L(!0);const u=c._id||c.id,d=await fetch("/api/marksheets?action=hod-response",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({marksheetId:g.marksheet._id,hodId:u,response:g.type,comments:e,scheduledDispatchDate:a})}),p=await d.json();if(!d.ok||!p.success)throw new Error(p.error||"Failed to submit response");const D=g.type==="approved"?"approved":g.type==="rejected"?"rejected":"rescheduled",y=((h=(l=g.marksheet)==null?void 0:l.studentDetails)==null?void 0:h.name)||"Student";C(`Dispatch request ${D} successfully.`),g.type==="approved"?o("âœ“ Approved",`Dispatch approved for ${y}`):g.type==="rejected"?_("Request Rejected",`Dispatch rejected for ${y}`):o("Rescheduled",`Dispatch rescheduled for ${y}`),m(),await A()}catch(u){S(u.message||"Unexpected error"),f("Action Failed",u.message||"Could not process the request")}finally{L(!1)}},P=async e=>{const a=b.filter(l=>l.status==="dispatch_requested"||l.status==="rescheduled_by_hod");if(a.length===0){C(`No pending requests available for bulk ${e}.`);return}try{j(!0),S("");const l=c._id||c.id,h=a.map(D=>fetch("/api/marksheets?action=hod-response",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({marksheetId:D._id,hodId:l,response:e,comments:"",scheduledDispatchDate:null})}).then(y=>y.json())),u=await Promise.all(h),d=u.filter(D=>D.success).length,p=u.length-d;if(d>0){const D=`Successfully ${e} ${d} request${d>1?"s":""}.${p>0?` ${p} failed.`:""}`;C(D),o(`Bulk ${e.charAt(0).toUpperCase()+e.slice(1)}`,`${d}/${u.length} requests processed successfully`),p===0&&x()}else{const D=`Failed to ${e.slice(0,-1)} any requests. Please try again.`;S(D),f("Bulk Action Failed",D)}await A()}catch(l){S(l.message||`Failed to perform bulk ${e}`)}finally{j(!1)}},X=n.useMemo(()=>[{id:"all",label:"All",count:w.length},{id:"dispatch_requested",label:"Pending",count:w.filter(e=>e.status==="dispatch_requested").length},{id:"rescheduled_by_hod",label:"Rescheduled",count:w.filter(e=>e.status==="rescheduled_by_hod").length}],[w]),b=n.useMemo(()=>(N==="all"?w:w.filter(a=>a.status===N)).sort((a,l)=>{var d,p;const h=(((d=a.studentDetails)==null?void 0:d.regNumber)||"").toString().toLowerCase(),u=(((p=l.studentDetails)==null?void 0:p.regNumber)||"").toString().toLowerCase();return h.localeCompare(u,void 0,{numeric:!0,sensitivity:"base"})}),[w,N]),z={dispatch_requested:"bg-yellow-100 text-yellow-800",rescheduled_by_hod:"bg-orange-100 text-orange-800",approved_by_hod:"bg-green-100 text-green-800",rejected_by_hod:"bg-red-100 text-red-800",dispatched:"bg-purple-100 text-purple-800"},K={dispatch_requested:"â³",rescheduled_by_hod:"ðŸ”„",approved_by_hod:"âœ…",rejected_by_hod:"â›”",dispatched:"ðŸ“¤"},J=(e={})=>{const a=(e.year||"").toString(),l=(e.section||"").toString();return!a&&!l?"N/A":l?a?`${a}-${l}`:l:a};return!c||c.role!=="hod"?t("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:s("div",{className:"glass-card p-8 rounded-3xl text-center",children:[t("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),t("p",{className:"text-gray-600",children:"Only HODs can approve dispatch requests."})]})}):s("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[t("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s("div",{className:"max-w-6xl mx-auto",children:[s("div",{className:"text-center mb-8",children:[t("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-black text-gray-900 mb-4",children:"Approval Requests"}),s("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:["Review and approve dispatch requests for ",c.department," Department"]})]}),t("div",{className:"glass-card p-4 sm:p-6 md:p-8 rounded-2xl md:rounded-3xl mb-8",children:E?s("div",{className:"text-center py-12",children:[t("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t("p",{className:"text-gray-600",children:"Loading pending requests..."})]}):w.length===0?s("div",{className:"text-center py-12",children:[t("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No pending requests"}),t("p",{className:"text-gray-600",children:"All dispatch requests have been processed"})]}):s(te,{children:[t("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:X.map(e=>s("button",{onClick:()=>$(e.id),className:`px-4 py-2 rounded-full text-sm font-medium border transition-all duration-200 ${N===e.id?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200 hover:border-blue-400"}`,children:[e.label,t("span",{className:`ml-2 inline-flex items-center justify-center px-2 py-0.5 rounded-full text-xs font-semibold ${N===e.id?"bg-white/25 text-white":"bg-gray-100 text-gray-700"}`,children:e.count})]},e.id))}),W&&t("div",{className:"mb-6 rounded-xl border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-800",children:W}),B&&t("div",{className:"mb-6 rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800",children:B}),s("div",{className:"mb-6 p-3 sm:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100",children:[s("div",{className:"flex items-start justify-between gap-4 mb-3",children:[t("div",{className:"flex items-center gap-2",children:s("div",{children:[s("div",{className:"flex items-center gap-2",children:[t("h3",{className:"text-sm font-semibold text-gray-900",children:"Bulk Actions"}),t(ae,{content:"Quickly approve, reschedule, or reject all pending dispatch requests at once."})]}),s("p",{className:"text-xs text-gray-600",children:[b.filter(e=>e.status==="dispatch_requested"||e.status==="rescheduled_by_hod").length," pending requests available"]})]})}),t(re,{isLoading:H,onClick:G})]}),s("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 sm:gap-3",children:[t("button",{onClick:()=>P("approved"),disabled:r||b.filter(e=>e.status==="dispatch_requested"||e.status==="rescheduled_by_hod").length===0,className:`px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 ${r||b.filter(e=>e.status==="dispatch_requested"||e.status==="rescheduled_by_hod").length===0?"bg-gray-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:s("span",{className:"flex items-center justify-center gap-1",children:[t("span",{children:"âœ…"}),t("span",{children:r?"Processing...":"Approve All"})]})}),t("button",{onClick:()=>O(!0),disabled:r||b.filter(e=>e.status==="dispatch_requested"||e.status==="rescheduled_by_hod").length===0,className:`px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-1 ${r||b.filter(e=>e.status==="dispatch_requested"||e.status==="rescheduled_by_hod").length===0?"bg-gray-300 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600"}`,children:s("span",{className:"flex items-center justify-center gap-1",children:[t("span",{children:"ðŸ”„"}),t("span",{children:r?"Processing...":"Reschedule All"})]})}),t("button",{onClick:()=>P("rejected"),disabled:r||b.filter(e=>e.status==="dispatch_requested"||e.status==="rescheduled_by_hod").length===0,className:`px-3 sm:px-4 py-2 rounded-lg font-medium text-white text-xs sm:text-sm transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 ${r||b.filter(e=>e.status==="dispatch_requested"||e.status==="rescheduled_by_hod").length===0?"bg-gray-300 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:s("span",{className:"flex items-center justify-center gap-1",children:[t("span",{children:"â›”"}),t("span",{children:r?"Processing...":"Reject All"})]})})]})]}),t("div",{className:"space-y-4",children:b.map(e=>{var a,l,h,u;return s("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s("div",{className:"p-4 sm:p-6 pb-3 sm:pb-4",children:[s("div",{className:"flex items-start justify-between mb-3 gap-2",children:[s("div",{className:"flex-1 min-w-0",children:[t("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-1 truncate",children:(a=e.studentDetails)==null?void 0:a.name}),s("p",{className:"text-xs sm:text-sm text-gray-600",children:[(l=e.studentDetails)==null?void 0:l.regNumber," â€¢ ",J(e.studentDetails)]})]}),s("span",{className:`px-2 py-1 sm:px-3 sm:py-1.5 rounded-full text-xs font-semibold uppercase tracking-wide flex items-center gap-1 whitespace-nowrap ${z[e.status]||"bg-yellow-100 text-yellow-800"}`,children:[t("span",{className:"text-xs sm:text-sm",children:K[e.status]||"ðŸ“„"}),t("span",{className:"text-xs",children:(e.status||"").replace(/_/g," ")})]})]}),s("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 text-xs sm:text-sm",children:[s("div",{children:[t("p",{className:"text-gray-500 mb-1",children:"Staff:"}),t("p",{className:"font-medium text-gray-900 truncate",children:e.staffName||"demo staff"})]}),s("div",{children:[t("p",{className:"text-gray-500 mb-1",children:"Parent Phone:"}),t("p",{className:"font-medium text-gray-900",children:((h=e.studentDetails)==null?void 0:h.parentPhoneNumber)||"â€”"})]}),s("div",{children:[t("p",{className:"text-gray-500 mb-1",children:"Exam Date:"}),t("p",{className:"font-medium text-gray-900",children:e.examinationDate?new Date(e.examinationDate).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"â€”"})]}),s("div",{children:[t("p",{className:"text-gray-500 mb-1",children:"Subjects:"}),t("p",{className:"font-medium text-gray-900",children:((u=e.subjects)==null?void 0:u.length)||0})]})]})]}),t("div",{className:"border-t border-gray-100"}),t("div",{className:"p-4 sm:p-6 pt-3 sm:pt-4 bg-gray-50",children:s("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:[s("button",{onClick:d=>i(d,e,"approved"),className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-green-600 hover:bg-green-700 text-white text-xs sm:text-sm font-medium rounded-lg transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1",children:[t("span",{className:"hidden sm:inline",children:"Approve Dispatch"}),t("span",{className:"sm:hidden",children:"Approve"})]}),s("button",{onClick:d=>i(d,e,"rejected"),className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm font-medium rounded-lg transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1",children:[t("span",{className:"hidden sm:inline",children:"Reject Request"}),t("span",{className:"sm:hidden",children:"Reject"})]}),t("button",{onClick:d=>i(d,e,"rescheduled"),className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-yellow-500 hover:bg-yellow-600 text-white text-xs sm:text-sm font-medium rounded-lg transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1",children:"Reschedule"}),s("button",{onClick:()=>Q(`/marksheets/${e._id||e.marksheetId}`),className:"px-3 sm:px-4 py-2 sm:py-2.5 bg-white hover:bg-gray-50 text-gray-700 text-xs sm:text-sm font-medium rounded-lg border border-gray-300 transition-all duration-200 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-1",children:[t("span",{className:"hidden sm:inline",children:"View Details"}),t("span",{className:"sm:hidden",children:"Details"})]})]})}),t("div",{className:"my-6 border-t border-dashed border-gray-300"})]},e._id)})})]})})]})}),t(le,{open:g.open,type:g.type,marksheet:g.marksheet,anchorRect:g.anchorRect,onClose:m,onSubmit:v,loading:T,error:B}),t(oe,{open:Y,onClose:()=>O(!1),loading:U,onSubmit:async({comments:e,scheduledDispatchDate:a})=>{const l=b.filter(h=>h.status==="dispatch_requested"||h.status==="rescheduled_by_hod");if(l.length===0){C("No pending requests to reschedule."),O(!1);return}try{F(!0);const h=c._id||c.id,u=l.map(y=>fetch("/api/marksheets?action=hod-response",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({marksheetId:y._id,hodId:h,response:"rescheduled",comments:e||"",scheduledDispatchDate:a||null})}).then(Z=>Z.json()).catch(Z=>({success:!1,error:Z.message}))),d=await Promise.all(u),p=d.filter(y=>y&&y.success).length,D=d.length-p;if(p>0){const y=`Rescheduled ${p} request${p>1?"s":""}.${D>0?` ${D} failed.`:""}`;C(y),o("Bulk Reschedule",`${p}/${d.length} requests rescheduled`)}else{const y="Failed to reschedule any requests. Please try again.";S(y),f("Bulk Reschedule Failed",y)}await A()}catch(h){S(h.message||"Bulk reschedule failed")}finally{F(!1),O(!1)}}}),t(M,{})]})}function le({open:o,type:f,marksheet:_,anchorRect:x,onClose:M,onSubmit:c,loading:R,error:w}){var A,G;const[q,E]=n.useState(""),[k,N]=n.useState(""),[$,g]=n.useState(()=>typeof window<"u"?window.innerWidth<640:!0),[I,T]=n.useState(o);if(n.useEffect(()=>{const i=()=>g(window.innerWidth<640);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),n.useEffect(()=>{if(o)T(!0);else{const i=setTimeout(()=>T(!1),120);return()=>clearTimeout(i)}},[o]),n.useEffect(()=>{var i;if(!(!o||!_))if(E(""),(i=_.dispatchRequest)!=null&&i.scheduledDispatchDate){const m=new Date(_.dispatchRequest.scheduledDispatchDate);Number.isNaN(m.getTime())?N(""):N(m.toISOString().slice(0,16))}else N("")},[o,f,_]),!I||!_)return null;const L=f==="rescheduled",B=f==="approved"?"Approve dispatch request":f==="rejected"?"Reject dispatch request":"Reschedule dispatch request",S=i=>{i.preventDefault();const m={comments:q.trim()||void 0,scheduledDispatchDate:void 0};if(k){const v=new Date(k);Number.isNaN(v.getTime())||(m.scheduledDispatchDate=v.toISOString())}try{r(!0)}catch{}c(m)},C=(()=>{if(typeof window>"u")return{width:"100%",maxWidth:"100%",borderRadius:"24px 24px 0 0",position:"fixed",left:0,right:0,bottom:0,margin:"0 auto"};if(["rejected","rescheduled","approved"].includes(f)){const e=Math.min(420,window.innerWidth-32),a=window.innerWidth,l=Math.max(16,Math.min((a-e)/2,a-e-16)),h=Math.max(window.scrollY+16,window.scrollY+80);return{width:e,position:"absolute",left:l,top:h}}if($||!x)return{width:"100%",maxWidth:"100%",borderRadius:"24px 24px 0 0",position:"fixed",left:0,right:0,bottom:0,margin:"0 auto"};const m=16,v=420,P=window.innerWidth,X=window.innerHeight;if(f==="rejected"||f==="rescheduled"||f==="approved"){const J=Math.max(m,Math.min((P-v)/2,P-v-m)),e=Math.max(window.scrollY+m,window.scrollY+120);return{width:v,position:"absolute",left:J,top:e}}let b=x.left+x.width+12;b+v>P-m&&(b=x.left-v-12,b<m&&(b=Math.min(Math.max(m,x.left+x.width/2-v/2),P-v-m)));let z=x.top+x.height+12;const K=window.scrollY+X-24-380;return z>K&&(z=Math.max(window.scrollY+m,x.top-380-12)),{width:v,position:"absolute",left:b,top:z}})(),r=(i=!1)=>{i&&T(!1);try{M()}catch{}},j=o?"opacity-100":"opacity-0",Y=o?"":"pointer-events-none",O="glass-card w-full p-6 shadow-2xl transition-all duration-100",U=o?"translate-y-0 rounded-t-2xl":"translate-y-full rounded-t-2xl",F=o?"translate-y-0 scale-100":"translate-y-2 scale-95",H=["rejected","rescheduled","approved"].includes(f),Q=`${O} ${$&&H?"rounded-xl shadow-lg":""} ${H?F:$?U:F}`;return t("div",{className:`fixed inset-0 z-50 flex items-start justify-center bg-black/40 px-4 py-6 sm:py-10 ${j} ${Y}`,onClick:i=>{i.target===i.currentTarget&&r(!1)},style:{transition:"opacity 100ms cubic-bezier(0.2,0,0,1)"},children:s("div",{className:Q,style:C,children:[s("div",{className:"mb-4",children:[t("h3",{className:"text-xl font-semibold text-gray-900",children:B}),s("p",{className:"text-sm text-gray-600 mt-1",children:[(A=_.studentDetails)==null?void 0:A.name," â€¢ ",(G=_.studentDetails)==null?void 0:G.regNumber]})]}),s("form",{onSubmit:S,className:"space-y-4",children:[s("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (optional)"}),t("textarea",{value:q,onChange:i=>E(i.target.value),rows:4,className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-blue-500 focus:outline-none",placeholder:f==="rejected"?"Let the staff know the reason for rejection":"Add any notes for the staff member"})]}),s("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule (optional)"}),t("input",{type:"datetime-local",value:k,onChange:i=>N(i.target.value),required:L,className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-blue-500 focus:outline-none"}),L&&t("p",{className:"text-xs text-gray-500 mt-2",children:"Provide the new date/time for dispatch. This will be visible to the staff member."})]}),w&&t("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:w}),s("div",{className:`flex ${$?"flex-col-reverse gap-2":"justify-end gap-3"} pt-2`,children:[t("button",{type:"button",onClick:()=>r(!0),className:`px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 ${$?"w-full text-center":""}`,children:"Cancel"}),t("button",{type:"submit",disabled:R,className:`px-5 py-2 rounded-lg text-white ${R?"bg-blue-300 cursor-wait":"bg-blue-600 hover:bg-blue-700"} ${$?"w-full text-center":""}`,children:R?"Saving...":"Confirm"})]})]})]})})}function oe({open:o,onClose:f,onSubmit:_,loading:x}){const[M,c]=n.useState(""),[R,w]=n.useState(""),[q,E]=n.useState(()=>typeof window<"u"?window.innerWidth<640:!0),[k,N]=n.useState(o);if(n.useEffect(()=>{const r=()=>E(window.innerWidth<640);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),n.useEffect(()=>{if(o)N(!0);else{const r=setTimeout(()=>N(!1),120);return()=>clearTimeout(r)}},[o]),n.useEffect(()=>{o||(c(""),w(""))},[o]),!k)return null;const $=r=>{if(r.preventDefault(),!R)return;const j=new Date(R);if(!Number.isNaN(j.getTime())){try{C(!0)}catch{}_({comments:M.trim(),scheduledDispatchDate:j.toISOString()})}},g=o?"opacity-100":"opacity-0",I=o?"":"pointer-events-none",S=`glass-card w-full max-w-md p-6 shadow-2xl transition-all duration-100 ${q?"rounded-xl shadow-lg":""} ${o?"translate-y-0 scale-100":"translate-y-2 scale-95"}`,W={position:"absolute",top:window.scrollY+120},C=(r=!1)=>{r&&N(!1);try{f()}catch{}};return t("div",{className:`fixed inset-0 z-50 flex items-start justify-center bg-black/40 px-4 py-6 sm:py-10 ${g} ${I}`,onClick:r=>{r.target===r.currentTarget&&C(!1)},style:{transition:"opacity 100ms cubic-bezier(0.2,0,0,1)"},children:s("div",{className:S,style:W,children:[s("div",{className:"mb-4",children:[t("h3",{className:"text-xl font-semibold text-gray-900",children:"Reschedule all pending requests"}),t("p",{className:"text-sm text-gray-600 mt-1",children:"Provide a new schedule date/time and optional comments for all pending requests."})]}),s("form",{onSubmit:$,className:"space-y-4",children:[s("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (optional)"}),t("textarea",{value:M,onChange:r=>c(r.target.value),rows:3,className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-blue-500 focus:outline-none",placeholder:"Notes for the staff members"})]}),s("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule (required)"}),t("input",{type:"datetime-local",value:R,onChange:r=>w(r.target.value),required:!0,className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-blue-500 focus:outline-none"}),t("p",{className:"text-xs text-gray-500 mt-2",children:"This date/time will be applied to all selected requests."})]}),s("div",{className:`flex ${q?"flex-col-reverse gap-2":"justify-end gap-3"} pt-2`,children:[t("button",{type:"button",onClick:()=>C(!0),className:`px-4 py-2 rounded-lg border border-gray-200 text-gray-700 hover:bg-gray-100 ${q?"w-full text-center":""}`,children:"Cancel"}),t("button",{type:"submit",disabled:x,className:`px-5 py-2 rounded-lg text-white ${x?"bg-blue-300 cursor-wait":"bg-blue-600 hover:bg-blue-700"} ${q?"w-full text-center":""}`,children:x?"Rescheduling...":"Confirm"})]})]})]})})}export{me as default};
